/* jce - 2.6.7.1 | 2017-01-18 | http://www.joomlacontenteditor.net | Copyright (C) 2006 - 2017 Ryan Demmer. All rights reserved | GNU/GPL Version 2 or later - http://www.gnu.org/licenses/gpl-2.0.html */
!function(){tinymce.create("tinymce.plugins.VisualChars",{init:function(ed,url){var t=this;t.editor=ed;var state=tinymce.util.Cookie.get("wf_visualchars_state");state=tinymce.is(state,"string")?parseFloat(state):ed.getParam("visualchars_default_state",0),ed.onInit.add(function(){ed.controlManager.setActive("visualchars",state),t._toggleVisualChars(state)}),ed.addButton("visualchars",{title:"visualchars.desc",cmd:"mceVisualChars"}),ed.onExecCommand.add(function(ed,cmd,ui,v,o){"mceNonBreaking"===cmd&&t._toggleVisualChars(state)}),ed.addCommand("mceVisualChars",function(){state=!state,ed.controlManager.setActive("visualchars",state),t._toggleVisualChars(state),ed.getParam("use_cookies",1)&&tinymce.util.Cookie.set("wf_visualchars_state",state?1:0)},t),ed.onKeyUp.add(function(ed,e){state&&13==e.keyCode&&t._toggleVisualChars(state)}),ed.onPreProcess.add(function(ed,o){o.get&&t._toggleVisualChars(!1,o.node)}),ed.onSetContent.add(function(ed,o){t._toggleVisualChars(state)})},getInfo:function(){return{longname:"Visual characters",author:"Moxiecode Systems AB / Ryan Demmer",authorurl:"http://tinymce.moxiecode.com",infourl:"http://wiki.moxiecode.com/index.php/TinyMCE:Plugins/visualchars",version:tinymce.majorVersion+"."+tinymce.minorVersion}},_toggleVisualChars:function(state,o){var nl,i,nv,div,node,t=this,ed=t.editor,b=(ed.getDoc(),o||ed.getBody());ed.selection;if(state)for(nl=[],tinymce.walk(b,function(n){3==n.nodeType&&n.nodeValue&&/(\u00a0|&nbsp;)/.test(n.nodeValue)&&nl.push(n)},"childNodes"),i=0;i<nl.length;i++){for(nv=nl[i].nodeValue,nv=nv.replace(/(\u00a0|&nbsp;)/g,'<span data-mce-bogus="1" class="mceItemHidden mceItemNbsp">$1</span>'),div=ed.dom.create("div",null,nv);node=div.lastChild;)ed.dom.insertAfter(node,nl[i]);ed.dom.remove(nl[i])}else for(nl=ed.dom.select("span.mceItemNbsp",b),i=nl.length-1;i>=0;i--)ed.dom.remove(nl[i],1)}}),tinymce.PluginManager.add("visualchars",tinymce.plugins.VisualChars)}();